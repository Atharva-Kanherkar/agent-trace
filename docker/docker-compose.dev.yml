services:
  dashboard:
    volumes:
      - ..:/app
      - dashboard_node_modules:/app/node_modules
    command: >
      bash -lc "npm ci &&
      npm run --workspace @agent-trace/dashboard build &&
      node packages/dashboard/dist/src/cli.js"

  runtime:
    volumes:
      - ..:/app
      - runtime_node_modules:/app/node_modules
    command: >
      bash -lc "npm ci &&
      npm run --workspace @agent-trace/runtime build &&
      node packages/runtime/dist/src/cli.js"

volumes:
  dashboard_node_modules:
  runtime_node_modules:
